import i18n from 'i18next'
import LanguageDetector from 'i18next-browser-languagedetector'
import { initReactI18next } from 'react-i18next'

interface TranslationResources {
  [key: string]: {
    translation: {
      [key: string]: any
    }
  }
}

const resources: TranslationResources = {
  'zh-CN': {
    translation: {
      brand: 'Maintainer Firewall',
      nav: {
        main: '主导航',
        dashboard: '仪表盘',
        guide: '接入指南',
        events: '事件',
        alerts: '告警',
        rules: '规则',
        failures: '失败队列',
        audit: '审计日志',
        users: '用户管理',
        analytics: '统计分析',
        systemConfig: '系统配置',
        accountMenu: '账户菜单',
        logout: '退出登录',
        logoutConfirm: '确定要退出登录吗？',
      },
      common: {
        loading: '加载中...',
        cancel: '取消',
        create: '创建',
        edit: '编辑',
        delete: '删除',
        update: '更新',
        actions: '操作',
        creating: '创建中...',
        updating: '更新中...',
        applyFilters: '应用筛选',
        prev: '上一页',
        next: '下一页',
        all: '全部',
        pageSummary: '页码: {{current}} / {{total}} · 总数: {{count}}',
        empty: '当前筛选条件下暂无数据',
        error: '错误: {{message}}',
        viewJson: '查看 JSON',
        noData: '暂无数据',
        noDataDescription: '当前没有匹配的数据，请尝试调整筛选条件或稍后查看。',
        errorBoundary: {
          title: '出错了',
          description: '应用程序遇到了意外错误，请刷新页面重试。',
          reload: '刷新页面',
          details: '查看错误详情',
        },
      },
      login: {
        title: '登录控制台',
        subtitle: '使用管理员账号登录 Maintainer Firewall。',
        username: '用户名',
        usernamePlaceholder: '请输入用户名',
        password: '密码',
        passwordPlaceholder: '请输入密码',
        submit: '登录',
        submitting: '登录中...',
        failed: '登录失败：{{message}}',
      },
      dashboard: {
        title: '仪表盘',
        subtitle: '服务状态总览与基础健康检查。',
        apiHealth: 'API 健康状态',
        cards: {
          events24h: '24小时事件数',
          alerts24h: '24小时告警数',
          failures24h: '24小时失败数',
          successRate24h: 'Webhook 成功率(24h)',
          p95Latency24h: '处理耗时 P95 (ms)',
        },
        trendTitle: '24小时趋势',
        noTrendData: '暂无趋势数据',
        noTrendDataDescription: '还没有足够的监控数据来生成趋势图。请稍后查看或检查数据源配置。',
        legend: {
          events: '事件',
          alerts: '告警',
          failures: '失败',
        },
      },
      events: {
        title: '事件',
        subtitle: '查看 webhook 事件流并按条件筛选。',
        filters: {
          eventType: '事件类型',
          action: '动作',
          eventTypePlaceholder: 'issues / pull_request',
          actionPlaceholder: 'opened / edited / closed',
        },
        sync: {
          title: 'GitHub 同步',
          running: '进行中',
          yes: '是',
          no: '否',
          lastSuccess: '最近成功时间',
          lastResult: '最近结果(saved/total)',
          stats: '累计成功/失败',
          lastError: '最近错误',
          refreshStatus: '刷新状态',
          syncNow: '立即拉取',
          syncing: '拉取中...',
          synced: '同步完成：保存 {{saved}} / 总计 {{total}}',
        },
        table: {
          id: 'ID',
          type: '类型',
          action: '动作',
          repository: '仓库',
          target: '目标',
          summary: '摘要',
          sender: '发送者',
          receivedAt: '接收时间',
        },
        empty: '当前筛选条件下暂无事件',
      },
      alerts: {
        title: '告警',
        subtitle: '查看规则命中后的建议动作与原因。',
        filters: {
          eventType: '事件类型',
          action: '动作',
          suggestionType: '建议类型',
          eventTypePlaceholder: 'issues / pull_request',
          actionPlaceholder: 'opened / edited / closed',
          suggestionTypePlaceholder: 'label / comment',
        },
        table: {
          delivery: '投递ID',
          type: '类型',
          action: '动作',
          suggestionType: '建议类型',
          suggestionValue: '建议值',
          ruleMatched: '命中规则',
          reason: '原因',
          repository: '仓库',
          sender: '发送者',
          createdAt: '创建时间',
          manageRule: '规则处理',
          goRules: '去规则页处理',
        },
        empty: '当前筛选条件下暂无告警',
      },
      failures: {
        title: '失败队列',
        subtitle: '查看自动动作执行失败记录，定位重试与异常原因。',
        includeResolved: '显示已解决项',
        tokenMissing: 'GITHUB_TOKEN 未配置，已禁用重试。',
        table: {
          id: 'ID',
          delivery: '投递ID',
          type: '类型',
          action: '动作',
          repository: '仓库',
          suggestion: '建议',
          attempts: '尝试次数',
          error: '错误',
          occurredAt: '发生时间',
          operation: '操作',
          last: '最近',
        },
        status: {
          resolved: '已解决',
        },
        retry: {
          required: '需要 Token',
          retrying: '重试中...',
          action: '重试',
        },
      },
      audit: {
        title: '审计日志',
        subtitle: '追踪规则变更与关键操作，支持按操作者/动作筛选。',
        filters: {
          actor: '操作者',
          actorPlaceholder: 'admin',
          action: '动作',
          since: '时间范围',
          all: '全部',
          last24h: '最近 24 小时',
          last7d: '最近 7 天',
          last30d: '最近 30 天',
        },
        table: {
          id: 'ID',
          actor: '操作者',
          action: '动作',
          target: '目标',
          targetId: '目标ID',
          payload: '载荷',
          createdAt: '创建时间',
        },
      },
      config: {
        title: '系统配置',
        subtitle: '编辑后端关键配置（敏感值不回显明文）。',
        save: '保存配置',
        saving: '保存中...',
        saved: '配置已保存',
        restartRequired: '配置已保存，请重启后端服务以完全生效。',
      },
      guide: {
        title: '接入指南',
        subtitle: '快速了解如何配置和使用 Maintainer Firewall。',
        quickStart: {
          title: '快速开始',
          step1: '配置 GITHUB_TOKEN 以启用 GitHub API 功能',
          step2: '设置 webhook URL 指向本服务的事件接收端点',
          step3: '在 GitHub 仓库设置中添加 webhook',
          step4: '创建规则以自动化处理特定事件',
          step5: '监控仪表盘和告警，优化规则配置',
        },
        cards: {
          rules: {
            title: '规则管理',
            desc: '创建和编辑事件匹配规则，控制自动化行为。',
          },
          events: {
            title: '事件流',
            desc: '查看 GitHub webhook 事件，支持按类型筛选。',
          },
          alerts: {
            title: '告警中心',
            desc: '查看规则命中后的建议操作和处理原因。',
          },
          failures: {
            title: '失败队列',
            desc: '监控自动化动作执行失败，支持重试操作。',
          },
        },
      },
      rules: {
        title: '规则',
        subtitle: '管理事件匹配规则并控制是否生效。',
        create: {
          title: '新建规则',
          eventType: '事件类型',
          keyword: '关键词',
          keywordPlaceholder: '例如：urgent',
          suggestionType: '建议类型',
          suggestionValue: '建议值',
          suggestionValuePlaceholder: '例如：P0 或请补充复现步骤',
          reason: '触发原因',
          reasonPlaceholder: '例如：高优先级问题优先处理',
          active: '创建后立即启用',
          submit: '创建规则',
          creating: '创建中...',
        },
        filters: {
          eventType: '事件类型',
          eventTypePlaceholder: 'issues / pull_request',
          keyword: '关键词',
          keywordPlaceholder: '按关键词模糊匹配',
          activeOnly: '仅看启用中',
          prefilledHint: '已根据告警自动带入筛选条件，可直接调整规则。',
        },
        table: {
          eventType: '事件类型',
          keyword: '关键词',
          suggestionType: '建议类型',
          suggestionValue: '建议值',
          reason: '触发原因',
          active: '状态',
          createdAt: '创建时间',
          action: '操作',
          enable: '启用',
          disable: '停用',
          updating: '更新中...',
        },
        status: {
          active: '启用中',
          inactive: '已停用',
        },
      },
      users: {
        title: '用户管理',
        description: '管理管理员用户账号、角色和权限设置。',
        createUser: '创建用户',
        editUser: '编辑用户',
        changePassword: '修改密码',
        username: '用户名',
        password: '密码',
        role: '角色',
        permissionsLabel: '权限',
        active: '激活状态',
        lastLogin: '最后登录',
        status: {
          active: '活跃',
          inactive: '停用',
        },
        roles: {
          admin: '管理员',
          editor: '编辑者',
          viewer: '查看者',
        },
        permissions: {
          read: '读取',
          write: '写入',
          admin: '管理',
        },
        createUserModal: {
          title: '创建新用户',
          submit: '创建用户',
          creating: '创建中...',
        },
        editUserModal: {
          title: '编辑用户',
          submit: '更新用户',
          updating: '更新中...',
        },
        changePasswordModal: {
          title: '修改密码',
          currentPassword: '当前密码',
          newPassword: '新密码',
          currentPasswordPlaceholder: '请输入当前密码',
          newPasswordPlaceholder: '请输入新密码',
          submit: '修改密码',
          updating: '修改中...',
        },
        actions: {
          activate: '激活',
          deactivate: '停用',
          edit: '编辑',
          delete: '删除',
          changePassword: '改密',
        },
        confirmDelete: '确定要删除用户 "{{username}}" 吗？此操作无法撤销。',
        noUsers: '暂无用户',
        usernamePlaceholder: '请输入用户名',
        passwordPlaceholder: '请输入密码',
        never: '从未登录',
      },
      analytics: {
        title: '统计分析',
        description: '深入分析系统运行数据和性能指标。',
        timeRange: {
          label: '时间范围',
          '24h': '24小时',
          '7d': '7天',
          '30d': '30天',
        },
        metrics: {
          events: '事件数',
          alerts: '告警数',
          failures: '失败数',
          successRate: '成功率',
        },
        charts: {
          trend: '趋势图表',
          performance: '性能指标',
          detailedData: '详细数据',
        },
        performance: {
          p95Latency: 'P95延迟',
          avgProcessing: '平均处理时间',
          uptime: '正常运行时间',
          throughput: '吞吐量',
        },
        table: {
          time: '时间',
          events: '事件',
          alerts: '告警',
          failures: '失败',
        },
        noData: '暂无数据',
      },
    },
  },
  en: {
    translation: {
      brand: 'Maintainer Firewall',
      nav: {
        main: 'Main Navigation',
        dashboard: 'Dashboard',
        guide: 'Guide',
        events: 'Events',
        alerts: 'Alerts',
        rules: 'Rules',
        failures: 'Failures',
        audit: 'Audit Logs',
        users: 'User Management',
        analytics: 'Analytics',
        systemConfig: 'System Config',
        accountMenu: 'Account Menu',
        logout: 'Logout',
        logoutConfirm: 'Are you sure you want to logout?',
      },
      common: {
        loading: 'Loading...',
        cancel: 'Cancel',
        create: 'Create',
        edit: 'Edit',
        delete: 'Delete',
        update: 'Update',
        actions: 'Actions',
        creating: 'Creating...',
        updating: 'Updating...',
        applyFilters: 'Apply Filters',
        prev: 'Prev',
        next: 'Next',
        all: 'All',
        pageSummary: 'page: {{current}} / {{total}} · total: {{count}}',
        empty: 'No data matched current filters',
        error: 'Error: {{message}}',
        viewJson: 'View JSON',
        noData: 'No Data',
        noDataDescription: 'No data matches the current criteria. Try adjusting filters or check back later.',
        errorBoundary: {
          title: 'Something went wrong',
          description: 'The application encountered an unexpected error. Please refresh the page.',
          reload: 'Refresh Page',
          details: 'View error details',
        },
      },
      login: {
        title: 'Login Console',
        subtitle: 'Sign in with admin credentials.',
        username: 'Username',
        usernamePlaceholder: 'Enter username',
        password: 'Password',
        passwordPlaceholder: 'Enter password',
        submit: 'Sign in',
        submitting: 'Signing in...',
        failed: 'Login failed: {{message}}',
      },
      dashboard: {
        title: 'Dashboard',
        subtitle: 'Service overview and quick health check.',
        apiHealth: 'API Health',
        cards: {
          events24h: 'Events (24h)',
          alerts24h: 'Alerts (24h)',
          failures24h: 'Failures (24h)',
          successRate24h: 'Webhook Success Rate (24h)',
          p95Latency24h: 'Processing P95 (ms)',
        },
        trendTitle: '24h Trend',
        noTrendData: 'No trend data',
        noTrendDataDescription: 'Not enough monitoring data yet to generate trends. Check back later or verify data source configuration.',
        legend: {
          events: 'events',
          alerts: 'alerts',
          failures: 'failures',
        },
      },
      events: {
        title: 'Events',
        subtitle: 'Browse webhook event stream with filters.',
        filters: {
          eventType: 'Event Type',
          action: 'Action',
          eventTypePlaceholder: 'issues / pull_request',
          actionPlaceholder: 'opened / edited / closed',
        },
        sync: {
          title: 'GitHub Sync',
          running: 'Running',
          yes: 'Yes',
          no: 'No',
          lastSuccess: 'Last success',
          lastResult: 'Last result(saved/total)',
          stats: 'Success/Failure count',
          lastError: 'Last error',
          refreshStatus: 'Refresh Status',
          syncNow: 'Sync Now',
          syncing: 'Syncing...',
          synced: 'Sync complete: saved {{saved}} / total {{total}}',
        },
        table: {
          id: 'ID',
          type: 'Type',
          action: 'Action',
          repository: 'Repository',
          target: 'Target',
          summary: 'Summary',
          sender: 'Sender',
          receivedAt: 'Received At',
        },
        empty: 'No events matched current filters',
      },
      alerts: {
        title: 'Alerts',
        subtitle: 'Review matched rule suggestions and reasons.',
        filters: {
          eventType: 'Event Type',
          action: 'Action',
          suggestionType: 'Suggestion Type',
          eventTypePlaceholder: 'issues / pull_request',
          actionPlaceholder: 'opened / edited / closed',
          suggestionTypePlaceholder: 'label / comment',
        },
        table: {
          delivery: 'Delivery',
          type: 'Type',
          action: 'Action',
          suggestionType: 'Suggestion Type',
          suggestionValue: 'Suggestion Value',
          ruleMatched: 'Rule Matched',
          reason: 'Reason',
          repository: 'Repository',
          sender: 'Sender',
          createdAt: 'Created At',
          manageRule: 'Manage Rule',
          goRules: 'Go to Rules',
        },
        empty: 'No alerts matched current filters',
      },
      failures: {
        title: 'Failures',
        subtitle: 'Inspect failed action executions for retry and incident analysis.',
        includeResolved: 'Show resolved',
        tokenMissing: 'GITHUB_TOKEN is not configured. Retry is disabled.',
        table: {
          id: 'ID',
          delivery: 'Delivery',
          type: 'Type',
          action: 'Action',
          repository: 'Repository',
          suggestion: 'Suggestion',
          attempts: 'Attempts',
          error: 'Error',
          occurredAt: 'Occurred At',
          operation: 'Operation',
          last: 'Last',
        },
        status: {
          resolved: 'Resolved',
        },
        retry: {
          required: 'Token Required',
          retrying: 'Retrying...',
          action: 'Retry',
        },
      },
      audit: {
        title: 'Audit Logs',
        subtitle: 'Track rule changes and key operations with actor/action filters.',
        filters: {
          actor: 'Actor',
          actorPlaceholder: 'admin',
          action: 'Action',
          since: 'Since',
          all: 'all',
          last24h: 'last 24h',
          last7d: 'last 7 days',
          last30d: 'last 30 days',
        },
        table: {
          id: 'ID',
          actor: 'Actor',
          action: 'Action',
          target: 'Target',
          targetId: 'Target ID',
          payload: 'Payload',
          createdAt: 'Created At',
        },
      },
      config: {
        title: 'System Config',
        subtitle: 'Edit backend critical config (secrets are never shown in plain text).',
        save: 'Save Config',
        saving: 'Saving...',
        saved: 'Config saved',
        restartRequired: 'Config saved. Restart backend service to fully apply changes.',
      },
      guide: {
        title: 'Guide',
        subtitle: 'Learn how to configure and use Maintainer Firewall quickly.',
        quickStart: {
          title: 'Quick Start',
          step1: 'Configure GITHUB_TOKEN to enable GitHub API features',
          step2: 'Set webhook URL to point to this service\'s event endpoint',
          step3: 'Add webhook in GitHub repository settings',
          step4: 'Create rules to automate specific event handling',
          step5: 'Monitor dashboard and alerts to optimize rule configuration',
        },
        cards: {
          rules: {
            title: 'Rule Management',
            desc: 'Create and edit event matching rules to control automated behavior.',
          },
          events: {
            title: 'Event Stream',
            desc: 'View GitHub webhook events with type filtering support.',
          },
          alerts: {
            title: 'Alert Center',
            desc: 'Review suggested actions and reasons after rule matches.',
          },
          failures: {
            title: 'Failure Queue',
            desc: 'Monitor failed automated actions with retry support.',
          },
        },
      },
      rules: {
        title: 'Rules',
        subtitle: 'Manage matching rules and control whether they are active.',
        create: {
          title: 'Create Rule',
          eventType: 'Event Type',
          keyword: 'Keyword',
          keywordPlaceholder: 'e.g. urgent',
          suggestionType: 'Suggestion Type',
          suggestionValue: 'Suggestion Value',
          suggestionValuePlaceholder: 'e.g. P0 or Please provide reproduction steps',
          reason: 'Reason',
          reasonPlaceholder: 'e.g. Prioritize high-severity reports',
          active: 'Activate immediately after creation',
          submit: 'Create Rule',
          creating: 'Creating...',
        },
        filters: {
          eventType: 'Event Type',
          eventTypePlaceholder: 'issues / pull_request',
          keyword: 'Keyword',
          keywordPlaceholder: 'fuzzy match by keyword',
          activeOnly: 'Active only',
          prefilledHint: 'Filters were prefilled from alert context. You can adjust and update rules now.',
        },
        table: {
          eventType: 'Event Type',
          keyword: 'Keyword',
          suggestionType: 'Suggestion Type',
          suggestionValue: 'Suggestion Value',
          reason: 'Reason',
          active: 'Status',
          createdAt: 'Created At',
          action: 'Action',
          enable: 'Enable',
          disable: 'Disable',
          updating: 'Updating...',
        },
        status: {
          active: 'Active',
          inactive: 'Inactive',
        },
      },
      users: {
        title: 'User Management',
        description: 'Manage admin user accounts, roles and permissions.',
        createUser: 'Create User',
        editUser: 'Edit User',
        changePassword: 'Change Password',
        username: 'Username',
        password: 'Password',
        role: 'Role',
        permissionsLabel: 'Permissions',
        active: 'Active Status',
        lastLogin: 'Last Login',
        status: {
          active: 'Active',
          inactive: 'Inactive',
        },
        roles: {
          admin: 'Administrator',
          editor: 'Editor',
          viewer: 'Viewer',
        },
        permissions: {
          read: 'Read',
          write: 'Write',
          admin: 'Admin',
        },
        createUserModal: {
          title: 'Create New User',
          submit: 'Create User',
          creating: 'Creating...',
        },
        editUserModal: {
          title: 'Edit User',
          submit: 'Update User',
          updating: 'Updating...',
        },
        changePasswordModal: {
          title: 'Change Password',
          currentPassword: 'Current Password',
          newPassword: 'New Password',
          currentPasswordPlaceholder: 'Enter current password',
          newPasswordPlaceholder: 'Enter new password',
          submit: 'Change Password',
          updating: 'Updating...',
        },
        actions: {
          activate: 'Activate',
          deactivate: 'Deactivate',
          edit: 'Edit',
          delete: 'Delete',
          changePassword: 'Change Password',
        },
        confirmDelete: 'Are you sure you want to delete user "{{username}}"? This action cannot be undone.',
        noUsers: 'No users found',
        usernamePlaceholder: 'Enter username',
        passwordPlaceholder: 'Enter password',
        never: 'Never logged in',
      },
      analytics: {
        title: 'Analytics',
        description: 'Deep analysis of system operation data and performance metrics.',
        timeRange: {
          label: 'Time Range',
          '24h': '24 hours',
          '7d': '7 days',
          '30d': '30 days',
        },
        metrics: {
          events: 'Events',
          alerts: 'Alerts',
          failures: 'Failures',
          successRate: 'Success Rate',
        },
        charts: {
          trend: 'Trend Chart',
          performance: 'Performance Metrics',
          detailedData: 'Detailed Data',
        },
        performance: {
          p95Latency: 'P95 Latency',
          avgProcessing: 'Avg Processing Time',
          uptime: 'Uptime',
          throughput: 'Throughput',
        },
        table: {
          time: 'Time',
          events: 'Events',
          alerts: 'Alerts',
          failures: 'Failures',
        },
        noData: 'No data available',
      },
    },
  },
}

i18n

  .use(initReactI18next)
  .init({
    resources,
    fallbackLng: 'zh-CN',
    supportedLngs: ['zh-CN', 'en'],
    interpolation: {
      escapeValue: false,
    },
    detection: {
      order: ['localStorage', 'navigator'],
      caches: ['localStorage'],
      lookupLocalStorage: 'mf_lang',
    },
  });

export default i18n;

