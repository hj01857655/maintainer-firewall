import i18n from 'i18next'
import LanguageDetector from 'i18next-browser-languagedetector'
import { initReactI18next } from 'react-i18next'

const resources = {
  'zh-CN': {
    translation: {
      brand: 'Maintainer Firewall',
      nav: {
        main: '主导航',
        dashboard: '仪表盘',
        guide: '接入指南',
        events: '事件',
        alerts: '告警',
        rules: '规则',
        failures: '失败队列',
        audit: '审计日志',
        systemConfig: '系统配置',
        logout: '退出登录',
      },
      common: {
        loading: '加载中...',
        applyFilters: '应用筛选',
        prev: '上一页',
        next: '下一页',
        pageSummary: '页码: {{current}} / {{total}} · 总数: {{count}}',
        empty: '当前筛选条件下暂无数据',
        error: '错误: {{message}}',
        viewJson: '查看 JSON',
      },
      login: {
        title: '登录控制台',
        subtitle: '使用管理员账号登录 Maintainer Firewall。',
        username: '用户名',
        usernamePlaceholder: '请输入用户名',
        password: '密码',
        passwordPlaceholder: '请输入密码',
        submit: '登录',
        submitting: '登录中...',
        failed: '登录失败：{{message}}',
      },
      dashboard: {
        title: '仪表盘',
        subtitle: '服务状态总览与基础健康检查。',
        apiHealth: 'API 健康状态',
        cards: {
          events24h: '24小时事件数',
          alerts24h: '24小时告警数',
          failures24h: '24小时失败数',
          successRate24h: 'Webhook 成功率(24h)',
          p95Latency24h: '处理耗时 P95 (ms)',
        },
        trendTitle: '24小时趋势',
        noTrendData: '暂无趋势数据',
        legend: {
          events: '事件',
          alerts: '告警',
          failures: '失败',
        },
      },
      events: {
        title: '事件',
        subtitle: '查看 webhook 事件流并按条件筛选。',
        filters: {
          eventType: '事件类型',
          action: '动作',
          eventTypePlaceholder: 'issues / pull_request',
          actionPlaceholder: 'opened / edited / closed',
        },
        sync: {
          title: 'GitHub 同步',
          running: '进行中',
          yes: '是',
          no: '否',
          lastSuccess: '最近成功时间',
          lastResult: '最近结果(saved/total)',
          stats: '累计成功/失败',
          lastError: '最近错误',
          refreshStatus: '刷新状态',
          syncNow: '立即拉取',
          syncing: '拉取中...',
          synced: '同步完成：保存 {{saved}} / 总计 {{total}}',
        },
        table: {
          id: 'ID',
          type: '类型',
          action: '动作',
          repository: '仓库',
          sender: '发送者',
          receivedAt: '接收时间',
        },
        empty: '当前筛选条件下暂无事件',
      },
      alerts: {
        title: '告警',
        subtitle: '查看规则命中后的建议动作与原因。',
        filters: {
          eventType: '事件类型',
          action: '动作',
          suggestionType: '建议类型',
          eventTypePlaceholder: 'issues / pull_request',
          actionPlaceholder: 'opened / edited / closed',
          suggestionTypePlaceholder: 'label / comment',
        },
        table: {
          delivery: '投递ID',
          type: '类型',
          action: '动作',
          suggestionType: '建议类型',
          suggestionValue: '建议值',
          ruleMatched: '命中规则',
          reason: '原因',
          repository: '仓库',
          sender: '发送者',
          createdAt: '创建时间',
          manageRule: '规则处理',
          goRules: '去规则页处理',
        },
        empty: '当前筛选条件下暂无告警',
      },
      failures: {
        title: '失败队列',
        subtitle: '查看自动动作执行失败记录，定位重试与异常原因。',
        includeResolved: '显示已解决项',
        tokenMissing: 'GITHUB_TOKEN 未配置，已禁用重试。',
        table: {
          id: 'ID',
          delivery: '投递ID',
          type: '类型',
          action: '动作',
          repository: '仓库',
          suggestion: '建议',
          attempts: '尝试次数',
          error: '错误',
          occurredAt: '发生时间',
          operation: '操作',
          last: '最近',
        },
        status: {
          resolved: '已解决',
        },
        retry: {
          required: '需要 Token',
          retrying: '重试中...',
          action: '重试',
        },
      },
      audit: {
        title: '审计日志',
        subtitle: '追踪规则变更与关键操作，支持按操作者/动作筛选。',
        filters: {
          actor: '操作者',
          actorPlaceholder: 'admin',
          action: '动作',
          since: '时间范围',
          all: '全部',
          last24h: '最近 24 小时',
          last7d: '最近 7 天',
          last30d: '最近 30 天',
        },
        table: {
          id: 'ID',
          actor: '操作者',
          action: '动作',
          target: '目标',
          targetId: '目标ID',
          payload: '载荷',
          createdAt: '创建时间',
        },
      },
      config: {
        title: '系统配置',
        subtitle: '编辑后端关键配置（敏感值不回显明文）。',
        save: '保存配置',
        saving: '保存中...',
        saved: '配置已保存',
        restartRequired: '配置已保存，请重启后端服务以完全生效。',
      },
      rules: {
        title: '规则',
        subtitle: '管理事件匹配规则并控制是否生效。',
        create: {
          title: '新建规则',
          eventType: '事件类型',
          keyword: '关键词',
          keywordPlaceholder: '例如：urgent',
          suggestionType: '建议类型',
          suggestionValue: '建议值',
          suggestionValuePlaceholder: '例如：P0 或请补充复现步骤',
          reason: '触发原因',
          reasonPlaceholder: '例如：高优先级问题优先处理',
          active: '创建后立即启用',
          submit: '创建规则',
          creating: '创建中...',
        },
        filters: {
          eventType: '事件类型',
          eventTypePlaceholder: 'issues / pull_request',
          keyword: '关键词',
          keywordPlaceholder: '按关键词模糊匹配',
          activeOnly: '仅看启用中',
          prefilledHint: '已根据告警自动带入筛选条件，可直接调整规则。',
        },
        table: {
          eventType: '事件类型',
          keyword: '关键词',
          suggestionType: '建议类型',
          suggestionValue: '建议值',
          reason: '触发原因',
          active: '状态',
          createdAt: '创建时间',
          action: '操作',
          enable: '启用',
          disable: '停用',
          updating: '更新中...',
        },
        status: {
          active: '启用中',
          inactive: '已停用',
        },
      },
      lang: {
        label: '语言',
        zhCN: '中文',
        en: 'English',
      },
    },
  },
  en: {
    translation: {
      brand: 'Maintainer Firewall',
      nav: {
        main: 'Main Navigation',
        dashboard: 'Dashboard',
        guide: 'Guide',
        events: 'Events',
        alerts: 'Alerts',
        rules: 'Rules',
        failures: 'Failures',
        audit: 'Audit Logs',
        systemConfig: 'System Config',
        logout: 'Logout',
      },
      common: {
        loading: 'Loading...',
        applyFilters: 'Apply Filters',
        prev: 'Prev',
        next: 'Next',
        pageSummary: 'page: {{current}} / {{total}} · total: {{count}}',
        empty: 'No data matched current filters',
        error: 'Error: {{message}}',
        viewJson: 'View JSON',
      },
      login: {
        title: 'Login Console',
        subtitle: 'Sign in with admin credentials.',
        username: 'Username',
        usernamePlaceholder: 'Enter username',
        password: 'Password',
        passwordPlaceholder: 'Enter password',
        submit: 'Sign in',
        submitting: 'Signing in...',
        failed: 'Login failed: {{message}}',
      },
      dashboard: {
        title: 'Dashboard',
        subtitle: 'Service overview and quick health check.',
        apiHealth: 'API Health',
        cards: {
          events24h: 'Events (24h)',
          alerts24h: 'Alerts (24h)',
          failures24h: 'Failures (24h)',
          successRate24h: 'Webhook Success Rate (24h)',
          p95Latency24h: 'Processing P95 (ms)',
        },
        trendTitle: '24h Trend',
        noTrendData: 'No trend data',
        legend: {
          events: 'events',
          alerts: 'alerts',
          failures: 'failures',
        },
      },
      events: {
        title: 'Events',
        subtitle: 'Browse webhook event stream with filters.',
        filters: {
          eventType: 'Event Type',
          action: 'Action',
          eventTypePlaceholder: 'issues / pull_request',
          actionPlaceholder: 'opened / edited / closed',
        },
        sync: {
          title: 'GitHub Sync',
          running: 'Running',
          yes: 'Yes',
          no: 'No',
          lastSuccess: 'Last success',
          lastResult: 'Last result(saved/total)',
          stats: 'Success/Failure count',
          lastError: 'Last error',
          refreshStatus: 'Refresh Status',
          syncNow: 'Sync Now',
          syncing: 'Syncing...',
          synced: 'Sync complete: saved {{saved}} / total {{total}}',
        },
        table: {
          id: 'ID',
          type: 'Type',
          action: 'Action',
          repository: 'Repository',
          sender: 'Sender',
          receivedAt: 'Received At',
        },
        empty: 'No events matched current filters',
      },
      alerts: {
        title: 'Alerts',
        subtitle: 'Review matched rule suggestions and reasons.',
        filters: {
          eventType: 'Event Type',
          action: 'Action',
          suggestionType: 'Suggestion Type',
          eventTypePlaceholder: 'issues / pull_request',
          actionPlaceholder: 'opened / edited / closed',
          suggestionTypePlaceholder: 'label / comment',
        },
        table: {
          delivery: 'Delivery',
          type: 'Type',
          action: 'Action',
          suggestionType: 'Suggestion Type',
          suggestionValue: 'Suggestion Value',
          ruleMatched: 'Rule Matched',
          reason: 'Reason',
          repository: 'Repository',
          sender: 'Sender',
          createdAt: 'Created At',
          manageRule: 'Manage Rule',
          goRules: 'Go to Rules',
        },
        empty: 'No alerts matched current filters',
      },
      failures: {
        title: 'Failures',
        subtitle: 'Inspect failed action executions for retry and incident analysis.',
        includeResolved: 'Show resolved',
        tokenMissing: 'GITHUB_TOKEN is not configured. Retry is disabled.',
        table: {
          id: 'ID',
          delivery: 'Delivery',
          type: 'Type',
          action: 'Action',
          repository: 'Repository',
          suggestion: 'Suggestion',
          attempts: 'Attempts',
          error: 'Error',
          occurredAt: 'Occurred At',
          operation: 'Operation',
          last: 'Last',
        },
        status: {
          resolved: 'Resolved',
        },
        retry: {
          required: 'Token Required',
          retrying: 'Retrying...',
          action: 'Retry',
        },
      },
      audit: {
        title: 'Audit Logs',
        subtitle: 'Track rule changes and key operations with actor/action filters.',
        filters: {
          actor: 'Actor',
          actorPlaceholder: 'admin',
          action: 'Action',
          since: 'Since',
          all: 'all',
          last24h: 'last 24h',
          last7d: 'last 7 days',
          last30d: 'last 30 days',
        },
        table: {
          id: 'ID',
          actor: 'Actor',
          action: 'Action',
          target: 'Target',
          targetId: 'Target ID',
          payload: 'Payload',
          createdAt: 'Created At',
        },
      },
      config: {
        title: 'System Config',
        subtitle: 'Edit backend critical config (secrets are never shown in plain text).',
        save: 'Save Config',
        saving: 'Saving...',
        saved: 'Config saved',
        restartRequired: 'Config saved. Restart backend service to fully apply changes.',
      },
      rules: {
        title: 'Rules',
        subtitle: 'Manage matching rules and control whether they are active.',
        create: {
          title: 'Create Rule',
          eventType: 'Event Type',
          keyword: 'Keyword',
          keywordPlaceholder: 'e.g. urgent',
          suggestionType: 'Suggestion Type',
          suggestionValue: 'Suggestion Value',
          suggestionValuePlaceholder: 'e.g. P0 or Please provide reproduction steps',
          reason: 'Reason',
          reasonPlaceholder: 'e.g. Prioritize high-severity reports',
          active: 'Activate immediately after creation',
          submit: 'Create Rule',
          creating: 'Creating...',
        },
        filters: {
          eventType: 'Event Type',
          eventTypePlaceholder: 'issues / pull_request',
          keyword: 'Keyword',
          keywordPlaceholder: 'fuzzy match by keyword',
          activeOnly: 'Active only',
          prefilledHint: 'Filters were prefilled from alert context. You can adjust and update rules now.',
        },
        table: {
          eventType: 'Event Type',
          keyword: 'Keyword',
          suggestionType: 'Suggestion Type',
          suggestionValue: 'Suggestion Value',
          reason: 'Reason',
          active: 'Status',
          createdAt: 'Created At',
          action: 'Action',
          enable: 'Enable',
          disable: 'Disable',
          updating: 'Updating...',
        },
        status: {
          active: 'Active',
          inactive: 'Inactive',
        },
      },
      lang: {
        label: 'Language',
        zhCN: '中文',
        en: 'English',
      },
    },
  },
}

i18n
  .use(LanguageDetector)
  .use(initReactI18next)
  .init({
    resources,
    fallbackLng: 'zh-CN',
    supportedLngs: ['zh-CN', 'en'],
    interpolation: {
      escapeValue: false,
    },
    detection: {
      order: ['localStorage', 'navigator'],
      caches: ['localStorage'],
      lookupLocalStorage: 'mf_lang',
    },
  })

export default i18n

